{
    "formatVersion": "1.0",
    "tagData": {
        "name": "REST Gateway",
        "icon": "data:image/png;base64,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",
        "description": "",
        "functions": [{
            "id": "function_0",
            "name": "New Function",
            "connector": {
                "inputs": [{
                    "label": ""
                }],
                "outputs": []
            },
            "properties": [{
                "name": "URL",
                "referenceName": "url",
                "type": "string",
                "defaultValue": "http://192.168.1.69:3001"
            }],
            "extension": {
                "initialize": "//log(\"Init Gateway: \"+messageValues.relativeUrl);\n\n/*\nvar cleanUrl = properties.url;\n\nif(properties.url.charAt(properties.url.length-1) !== '/')\n{\n\tlog(\"Char Different! \"+properties.url.charAt(properties.url.length-1));\n\tcleanUrl = properties.url+'/';\n}\n\nreturn {\n\truntimeValues :  { url: cleanUrl }\n}\n*/",
                "receive": "/*\nlog(\"Receive Gateway: \"+messageValues.relativeUrl);\nlog(\"Receive Gateway sensor: \"+messageValues.data.sensor);\n\nreturn {\n\tmessageValues: messageValues\t\n}*/",
                "execute": "if(properties.url.charAt(properties.url.length-1) != '/')\n{\n\tproperties.url = properties.url+'/';\n}\n\nvar apiUrl = properties.url+messageValues.relativeUrl;\n\nlog(\"REST Call: \"+messageValues.type+\" - \"+apiUrl+ \" - \"+JSON.stringify(messageValues.data));\n\najax ({\n    url : apiUrl,\n    data : messageValues.data,\n    type : messageValues.type,\n    timeout : 5000,\n    success : function ( contents ) {\n\t\tlog(new Date().toUTCString()+\" - success! \");\n    },\n    error : function ( request, errorMessage ) {\n        log(new Date().toUTCString() + \" - error: \"+errorMessage);\n    }\n});\n \nreturn {\n    resultType : \"continue\"\n};",
                "result": ""
            }
        }]
    }
}
